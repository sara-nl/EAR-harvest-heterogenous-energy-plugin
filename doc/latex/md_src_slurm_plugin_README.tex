E\+AR S\+L\+U\+RM plugin allows to load dynamically the E\+AR library for the S\+L\+U\+RM jobs, if the enabling argument is set. The library will be loaded over each job step, intercepting all M\+PI calls. The daemon will be loaded and closed next to S\+L\+U\+RM\textquotesingle{}s daemon ({\itshape slurmd}).

\subsection*{Configuration }

Add in S\+L\+U\+RM\textquotesingle{}s {\ttfamily plugstack.\+conf} file, a new entry with the path of the compiled plugin {\ttfamily earplug.\+so}. Take a look into the example {\ttfamily etc/ear.\+plugstack.\+conf}.

You will the argument {\ttfamily prefix} which points to the E\+AR installation path and it is used to load the library using {\ttfamily L\+D\+\_\+\+P\+R\+E\+L\+O\+AD} mechanism. Also you will find {\ttfamily localstatedir} used to contact with the E\+A\+RD, which by default points the path you set during the {\ttfamily ./configure} using {\ttfamily -\/-\/localstatedir} or {\ttfamily E\+A\+R\+\_\+\+T\+MP} arguments.

Finally, the arguments {\ttfamily eargmd\+\_\+host} and {\ttfamily eargmd\+\_\+port}, for the hostname and port of the node in case you are using E\+A\+R\+G\+MD.

\subsection*{New S\+L\+U\+RM arguments }

After the plugin configuration, a set of additional arguments are included in S\+L\+U\+RM\textquotesingle{}s {\ttfamily srun} for the ease of use of E\+AR. You can see a complete list of those arguments below.

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*3{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}{\bf Argument }&{\bf Description }&{\bf Type / comment  }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}{\bf Argument }&{\bf Description }&{\bf Type / comment  }\\\cline{1-3}
\endhead
--ear &Enables E\+AR &Just for default values. \\\cline{1-3}
--ear-\/policy &Energy/time policy &See {\itshape E\+A\+R\+\_\+\+P\+O\+W\+E\+R\+\_\+\+P\+O\+L\+I\+CY} environment variable. \\\cline{1-3}
--ear-\/policy-\/th &Threshold of the policy &Value between 0 and 1. \\\cline{1-3}
--ear-\/verbose &Verbosity level &Value between 0 and 4. \\\cline{1-3}
--ear-\/learning &Enables the learning phase &{\itshape P\+\_\+\+S\+T\+A\+TE} \mbox{[}0..n\mbox{]}. \\\cline{1-3}
--ear-\/traces &Saves trace files with metrics &Path where the files will be placed. \\\cline{1-3}
--job-\/name &App/job name for debugging &Name for the job/application. \\\cline{1-3}
--ear-\/user-\/db &Use-\/db filename root &Specifies the file to save the user applications metrics summary\textquotesingle{}file.\+nodename.\+csv\textquotesingle{} file \\\cline{1-3}
--ear-\/cpufreq &Sets the job frequency &Just for {\itshape M\+O\+N\+I\+T\+O\+R\+I\+N\+G\+\_\+\+O\+N\+LY} policy. \\\cline{1-3}
\end{longtabu}

\begin{DoxyItemize}
\item For more information consult {\ttfamily srun -\/-\/help} output or see configuration options sections for more detailed description.
\item Example\+: {\ttfamily ./srun -\/\+N2 -\/n2 -\/-\/ear-\/policy=M\+I\+N\+\_\+\+E\+N\+E\+R\+G\+Y\+\_\+\+T\+O\+\_\+\+S\+O\+L\+U\+T\+I\+ON -\/-\/ear-\/policy-\/th=0.\+9 application}
\item Maximum {\itshape P\+\_\+\+S\+T\+A\+TE} depends on the C\+PU.
\item Most of the options can only be used by Authorized users (specified at ear.\+conf file) 
\end{DoxyItemize}