<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>EAR: EAR configuration file</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EAR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">EAR configuration file </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>ear.conf is a text file describing EAR options cluster description. It must be readable at all compute nodes and at nodes where commands are executed. Lines starting with # are comments. Some of the arguments are optional. A test for ear.conf file can be found at src/test/functionals/ear_conf</p>
<h1>Parameters</h1>
<h1>Services configuration</h1>
<p>1-Mariadb CONFIGURATION</p>
<p><b>MariaDBIp</b>=172.30.2.101 <b>MariaDBUser</b>=ear_daemon <b>MariaDBPassw</b>= <b>MariaDBPort</b>=0 <b>MariaDBHost</b>=hostname <b>MariaDBDatabase</b>=EAR_DB</p>
<p>2-EAR Global Manager</p>
<p><b>GlobalManagerVerbose</b>=1 <b>GlobalManagerPeriodT1</b>=90, Period T1 and Period T2 are specified in seconds T1 (ex. must be less than T2, ex. 10min and 1 month) <b>GlobalManagerPeriodT2</b>=259200 <b>GlobalManagerUnits=K</b>=-|K|M , Units applied to energy limit , default KJ <b>GlobalManagerEnergyLimit</b>=550000 <b>GlobalManagerUseAggregated</b>=1 , use (or not) aggregated metrics to compute total energy <b>GlobalManagerHost</b>=name <b>GlobalManagerPort</b>=50000 , port were EARGM will be executed <b>GlobalManagerMode</b>=0, Two modes are supported 0=manual 1= means automatic <b>GlobalManagerMail</b>=nomail, independetly on the mode, a mail can be sent reporting the warning level (and the action taken in automatic mode). nomail means no mail is sent <b>GlobalManagerWarningsPerc</b>=85,90,95 , Thee values must be provided corresponding with DEFCON_L4,DEFCON_L3, and DEFCON_L2 (higer values means PANIC) <b>GlobalManagerGracePeriods</b>=3 ,number of "grace" T1 periods before doing a new re-evaluation</p>
<p>3-EARD</p>
<p><b>NodeDaemonVerbose</b>=1, different verbose levels are supported (0..4) <b>NodeDaemonPowermonFreq</b>=60, in seconds <b>NodeDaemonMaxPstate</b>=1 , 1 means nominal frequency (no turbo) <b>NodeDaemonTurbo</b>=0 , 0 means no turbo frequency <b>NodeDaemonPort</b>=5000 <b>NodeUseDB</b>=1 , Send data to MySQL DB <b>NodeUseEARDBD</b>=1, Send datat to MySQL using EARDBD (1) or directly to the mysql server (0) <b>NodeForceFrequencies</b>=1 , 1 means EAR is totally controlling frequencies (targeting production systems), 0 means EAR will not change the frequencies when users are not using EAR library (targeted to benchmarking systems)</p>
<p>4-DATABASE MANAGER</p>
<p><b>DBDaemonAggregationTime</b>=300 , in seconds <b>DBDaemonPortTCP</b>=4711 , This port is used for main EARDBD <b>DBDaemonPortSecTCP</b>=4712, This port is used for secondary (mirror) EARDBD <b>DBDaemonSyncPort</b>=4713a, This port is used to synchronize main and mirror <b>DBDaemonMemorySize</b>=120, Max memory size used by EARDB. Memory size expressed in MB</p>
<h1>Library configuration</h1>
<p><b>CoefficientsDir=** (ETC)/ear/coeffs , path where coefficients are installed **DynAISLevels</b>=4, number of levels used by DynAIS algorithm <b>DynAISWindowSize</b>=500, Windows size used by DynAIS, the higher the size the higer the overhead <b>DynaisTimeout</b>=30 ,Maximum time (in seconds) EAR will wait until a signature is computed. After DynaisTimeout seconds, if no signature is computed, EAR will go to periodic mode <b>LibraryPeriod</b>=30, When EAR goes to periodic mode, it will compute the Application signature every "LibraryPeriod" seconds <b>CheckEARModeEvery</b>=1000, EAR will check every N mpi calls whether it must go to periodic mode or not</p>
<h1>Paths</h1>
<p><b>TmpDir</b>=(EAR_TMP), this path is used for communitation files, shared memory etc. It must be PRIVATE per compute node and with read/write permissions <b>EtcDir</b>=(ETC), etc path where coefficients and configuration are stored. It must be readable in all compute nodes (it can be replicated). <b>DataBasePathName</b>=(ETC)/ear/dbs/dbs., when no DB is installed, metrics are generated in text files.</p>
<h1>Energy policies configuration</h1>
<p><b>DefaultPowerPolicy</b>=MIN_TIME_TO_SOLUTION , default policy <b>SupportedPolicies</b>=MONITORING_ONLY,MIN_TIME_TO_SOLUTION , list of allowed policies for normal users (it is a subset of MONITORING_ONLY,MIN_TIME_TO_SOLUTION,MIN_ENERGY_TO_SOLUTION) <b>DefaultPstates</b>=1,4,4, specified in the following order: MIN_ENERGY_TO_SOLUTION,MIN_TIME_TO_SOLUTION,MONITORING_ONLY <b>MinEfficiencyGain</b>=0.7,threshold used for MIN_TIME_TO_SOLUTION policy <b>MaxPerformancePenalty</b>=0.1, threshold used for MIN_ENERGY_TO_SOLUTION policy <b>MinTimePerformanceAccuracy</b>=10000000, min time between two energy readings for performance accuracy</p>
<h1>Security configuration</h1>
<p>Authorized users, groups, and slurm accounts are allowed to change policies, thresholds, frequencies etc they are supposed to be admins . A list of users, linux groups, and/or SLURM accounts can be provided.</p>
<p><b>AuthorizedUsers</b>=user1,user2 <b>AuthorizedAccounts</b>=acc1,acc2,acc3 <b>AuthorizedGroups</b>=xx,yy</p>
<p>List of energy tags and users/groups/SLURM accounts authorized to use each one. These energy tags implies pre-defined configurations for applications (EAR library is not loaded) <b>EnergyTag</b>=memory-intensive <b>pstate</b>=4 <b>users</b>=user1,user2 <b>groups</b>=group1,group2 <b>accounts</b>=acc1,acc2</p>
<h1>Special nodes</h1>
<p>Describes nodes with some special characteristic such as different default pstates, default coefficients file, and/ot policy thresholds</p>
<p><b>NodeName</b>=nodename_list <b>CPUs</b>=24 <b>DefaultPstates</b>=2,5,5 <b>DefCoefficientsSFile</b>=filename <b>MaxPerformancePenalty</b>=def_th (between 0 and 1) <b>MinEfficiencyGain</b>=def_th (between 0 and 1)</p>
<h1>Island description</h1>
<p>Nodes are grouped in islands, this section is mandatory since it is used for cluster description more than one line per island must be supported to specify different dbip ports. One EARDBD cannot be mirror from more than one EARDBD</p>
<p><b>Island</b>=0 <b>Nodes</b>=nodename_list <b>DBIP</b>=EARDB_hostname <b>DBSECIP</b>=EARDB_mirror_hostname</p>
<ul>
<li>nodename_list accept the following formats:<ul>
<li>Nodes=node1,node2,node3</li>
<li>Nodes=node[1-3]</li>
<li>Nodes=node[1,2,3]</li>
</ul>
</li>
<li>Any combination of the two latter options will work, but if nodes have to be specified individually (the first format) as of now they have to be specified in their own line. As an example:<ul>
<li>Valid formats:<ul>
<li>Island=1 Nodes=node1,node2,node3</li>
<li>Island=1 Nodes=node[1-3],node[4,5]</li>
</ul>
</li>
<li>Invalid formats:<ul>
<li>Island=1 Nodes=node[1,2],node3</li>
<li>Island=1 Nodes=node[1-3],node4 </li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
