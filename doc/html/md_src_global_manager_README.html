<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>EAR: Energy Aware Runtime: Global Manager Daemon</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EAR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Energy Aware Runtime: Global Manager Daemon </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The EAR Global Manager Daemon (EARGMD) is a cluster wide component that controls the percetage of the maximum energy consumed. It can be configured to take actions automatically like warning sysadmins to take actions or limiting the nodes policy.</p>
<h2>Requirements </h2>
<p>EARGMD uses periodic power metrics reported by ../daemon/README.md "EARD", the per-node daemon, including job identification details (job id and step id if you are using the SLURM plugin). These metrics are stored and aggregated in a MariaDB (MySQL) database through the ../database_cache/REAME.md "EARDBD".</p>
<h2>Configuration </h2>
<p>The EAR Global Manager Daemon uses the <code>/ear.conf</code> file to be configured. It can be dynamically configured by reloading the service.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# Fields related to the Global Manager Daemon</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;# Verbose level</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;GlobalManagerVerbose=1</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;# Period T1 in seconds (10 min)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;GlobalManagerPeriodT1=600</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;# Period T2 in seconds (30 days)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;GlobalManagerPeriodT2=2592000</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;# Abosolute value (joules)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;GlobalManagerEnergyLimit=756000</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;GlobalManagerPort=6000</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;# Two modes are supported (0 pasive, 1 active or automatic)</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;GlobalManagerMode=0</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;# Anyway, a mail can be sent reporting the warning level (and the action taken in automatic mode). nomail means no mail is going to be sent</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;GlobalManagerMail=nomail</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;#Thee values must be provided corresponding with DEFCON_L4,DEFCON_L3, and DEFCON_L2 (higer values means PANIC)</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;GlobalManagerWarningsPerc=85,90,95</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;#T1 &quot;grace&quot; periods between DEFCON re-evaluations. In that case, 3 T1 periods means 30 minutes</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;GlobalManagerGracePeriods=3</div></div><!-- fragment --><h2>API </h2>
<p>The global manager offers a simple API <code>eargm_api.c</code> to notify the execution and finalization of the jobs. The API just notifies the EARGMD about the number of nodes to be used and released after the execution of the job. The SLURM plugin automatically does this task.</p>
<h2>Execution </h2>
<p>To execute this component, this <code>systemctl</code> command examples are provided:</p><ul>
<li><code>sudo systemctl start eard</code> to start the EARGMD service.</li>
<li><code>sudo systemctl stop eard</code> to stop the EARGMD service.</li>
<li><code>sudo systemctl reload eard</code> to force to reload the configuration of the EARGMD service.</li>
</ul>
<h2>Commands </h2>
<p>This is a list of the available commands:</p>
<table class="doxtable">
<tr>
<th>Command </th><th>Description  </th></tr>
<tr>
<td>eargm_new_job </td><td>Informs the EARGMD that a job is about to start. </td></tr>
<tr>
<td>eargm_end_job </td><td>Informs the EARGMD that a job has finished. </td></tr>
</table>
<h2>License </h2>
<p>All the files in the EAR framework are under the LGPLv2.1 license. See the <a href="../../COPYING">COPYING</a> file in the EAR root directory. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
