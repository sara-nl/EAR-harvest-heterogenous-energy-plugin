<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>EAR: EAR components</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EAR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">EAR components </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>EAR is composed by four main components: EAR Library, EAR (node) Daemon, EAR Global Manager Daemon, and EAR Database Daemon. The EAR Library (./library/README.md "EARL") and EAR Daemon (./daemon/README.md "EARD") together are the core of the EAR package.</p>
<h2>EAR library</h2>
<p>The EAR Library interceps the Profiling MPI Interface (PMPI) symbols using the dynamic loader environment variable LD_PRELOAD. Each intercepted call executes the DynAIS algorithm to detect the tipical repetitive sequences of code found in the regular HPC applications. Once found a new repetitive sequence, metrics like CPI, Memory bandwith and Node power are calculated.</p>
<p>This data, called the <b>application signature</b>, together with the node characterization, called the <b>system signature</b>, allows the library to predict the performance(time) and power for the list of available frequencies in the node for the upcoming iterations.</p>
<p>Given the predictions and the power policy, the <em>best</em> CPU frequency is selected. For instance, given an application with a memory intensive behavior, EARL will: 1) Detect dynamically the iterative section for the application. 2) Compute the application signature. 3) Apply perforance and power models. 4) Apply the power policy. 5) And finally, select and change the CPU frequency. In that kind of applications, reducing the CPU frequency will not significantly affect the application performance.</p>
<p>The system signature is a set of coefficients and it's computed once (at configuration time). The process of computing the system signature is called the learning phase. It consist in the execution of a set of pre-selected stressing benchmarks included in the package distribution. The application signature is computed at runtime since it characterizes the application.</p>
<h2>EAR (node) Daemon</h2>
<p>EAR Daemon (./daemon/README.md "EARD") is a daemon running in all the compute nodes and it is a core component. It provides three types of services: access to privileged metrics, periodic power monitoring and power control commands.</p>
<p>EARD is used by the library to read those metrics that requires root privileges. It also offers a simplified API to be used by applications. This API only provides the reading of the metrics (not control operations such as changing the frequency).</p>
<p>Moreover, each EARD is continuosly monitoring the node and reporting information to the DB through the EARDBD. This information is used later for the Global Energy Manager.</p>
<p>Finally, EARD offers a privileged API to change power policy settings.</p>
<h2>EAR Global Manager</h2>
<p>The EAR Global Manager Daemon (./global_manager/README.md "EARGMD") is a step beyond than the original daemon and library package. All the HPC clusters must control the energy consumed and, moreover, some others have limitations beacuse of the infrastructure. The EAR Global Manager can be used in <b>passive</b> mode or <b>active</b> mode.</p>
<p>When configured in passive mode, the EARGMD will monitor the energy consumed in the system, reporting warnings to the database or performing simple actions such as sending mails).</p>
<p>When configured in active mode, the EARGMD will automatically react to energy warnings detected. The current EARGMD only supports predefined levels and actions in automatic mode, but a new version where different levels and actions will be configured through the <code>ear.conf</code> file (or a similar approach) is being developed.</p>
<h2>EAR Database daemon</h2>
<p>The EAR Database Daemon (./database_cache/README.md "EARDBD") collects records generated by EARL and EARD and reportW it to the centralized database. Several EARDBD's will run in the cluster reducing the number of inserts to the database and providing aggregated metrics for some of the records.</p>
<h2>EAR SLURM plugin</h2>
<p>Finally, the ./slurm_plugin/README.md "EAR SLURM plugin", a lesser component which helps to connect all the main components focusing in the ease of use. It is a SLURM SPANK type plugin, extending the 'srun' and 'sbatch' options.</p>
<h2>EAR source directories </h2>
<table class="doxtable">
<tr>
<th>Directory </th><th>Content  </th></tr>
<tr>
<td>library </td><td>EAR Library </td></tr>
<tr>
<td>database_cache </td><td>EAR Database </td></tr>
<tr>
<td>daemon </td><td>EAR (node) Daemon </td></tr>
<tr>
<td>global_manager </td><td>EAR Global Manager </td></tr>
<tr>
<td>commands </td><td>Basic commands to get the metrics already reported by EAR in the DB, orchange cluster and node power </td></tr>
<tr>
<td>slurm_plugin </td><td>EAR SLURM Plugin, which simplifies the execution of the EAR Library next to an MPI application </td></tr>
<tr>
<td>tools </td><td>Additional programs used during the learning phase </td></tr>
<tr>
<td>tests </td><td>Programs to test the installation and runtime of the components </td></tr>
<tr>
<td>metrics </td><td>Low level metric gathering functions </td></tr>
<tr>
<td>common </td><td>Generic functions and types </td></tr>
</table>
<h2>License </h2>
<p>All the files in the EAR framework are under the LGPLv2.1 license. See the <a href="../../COPYING">COPYING</a> file in the EAR root directory. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
