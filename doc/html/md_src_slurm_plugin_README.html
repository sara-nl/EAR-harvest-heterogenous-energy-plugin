<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>EAR: SLURM plugin configuration guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EAR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SLURM plugin configuration guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>EAR SLURM plugin allows to load dynamically the EAR library for the SLURM jobs, if the enabling argument is set. The library will be loaded over each job step, intercepting all MPI calls. The daemon will be loaded and closed next to SLURM's daemon (<em>slurmd</em>).</p>
<h2>Configuration </h2>
<p>Add in SLURM's <code>plugstack.conf</code> file, a new entry with the path of the compiled plugin <code>earplug.so</code>. Take a look into the example <code>etc/ear.plugstack.conf</code>.</p>
<p>You will the argument <code>prefix</code> which points to the EAR installation path and it is used to load the library using <code>LD_PRELOAD</code> mechanism. Also you will find <code>localstatedir</code> used to contact with the EARD, which by default points the path you set during the <code>./configure</code> using <code>--localstatedir</code> or <code>EAR_TMP</code> arguments.</p>
<p>Finally, the arguments <code>eargmd_host</code> and <code>eargmd_port</code>, for the hostname and port of the node in case you are using EARGMD.</p>
<h2>New SLURM arguments </h2>
<p>After the plugin configuration, a set of additional arguments are included in SLURM's <code>srun</code> for the ease of use of EAR. You can see a complete list of those arguments below.</p>
<table class="doxtable">
<tr>
<th>Argument </th><th>Description </th><th>Type / comment  </th></tr>
<tr>
<td>&ndash;ear </td><td>Enables EAR </td><td>Just for default values. </td></tr>
<tr>
<td>&ndash;ear-policy </td><td>Energy/time policy </td><td>See <em>EAR_POWER_POLICY</em> environment variable. </td></tr>
<tr>
<td>&ndash;ear-policy-th </td><td>Threshold of the policy </td><td>Value between 0 and 1. </td></tr>
<tr>
<td>&ndash;ear-verbose </td><td>Verbosity level </td><td>Value between 0 and 4. </td></tr>
<tr>
<td>&ndash;ear-learning </td><td>Enables the learning phase </td><td><em>P_STATE</em> [0..n]. </td></tr>
<tr>
<td>&ndash;ear-traces </td><td>Saves trace files with metrics </td><td>Path where the files will be placed. </td></tr>
<tr>
<td>&ndash;job-name </td><td>App/job name for debugging </td><td>Name for the job/application. </td></tr>
<tr>
<td>&ndash;ear-user-db </td><td>Use-db filename root </td><td>Specifies the file to save the user applications metrics summary'file.nodename.csv' file </td></tr>
<tr>
<td>&ndash;ear-cpufreq </td><td>Sets the job frequency </td><td>Just for <em>MONITORING_ONLY</em> policy. </td></tr>
</table>
<ul>
<li>For more information consult <code>srun --help</code> output or see configuration options sections for more detailed description.</li>
<li>Example: <code>./srun -N2 -n2 --ear-policy=MIN_ENERGY_TO_SOLUTION --ear-policy-th=0.9 application</code></li>
<li>Maximum <em>P_STATE</em> depends on the CPU.</li>
<li>Most of the options can only be used by Authorized users (specified at ear.conf file) </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
